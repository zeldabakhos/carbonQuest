[dotenv@17.2.3] injecting env (2) from .env -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
ðŸš€ API running on http://localhost:3000
âœ… MongoDB connected
ðŸ“¥ Received scan request: {
  userId: '69777e793c00166d8bcfbe74',
  barcode: '123456789',
  name: 'Test Product',
  brand: 'Test Brand',
  co2e: 1.5,
  carbonRating: 'B',
  source: 'openfoodfacts'
}
ðŸ’¾ Creating scan for user: 69777e793c00166d8bcfbe74
âœ… Scan created: new ObjectId('69777e793c00166d8bcfbe76')
ðŸŒ± Growth points for rating B : 15
âœ… User updated - Points: 10 Scans: 1
ðŸŒ³ Garden updated - Plants: 1 Level: 0
ðŸ“¥ Received scan request: {
  userId: '697779d0e78b4fac5872b456',
  barcode: '3068320120256',
  name: 'Eau minÃ©rale naturelle',
  brand: 'Evian',
  co2e: 0.608,
  carbonRating: 'A',
  source: 'openfoodfacts'
}
ðŸ’¾ Creating scan for user: 697779d0e78b4fac5872b456
âœ… Scan created: new ObjectId('69777eab3c00166d8bcfbe82')
ðŸŒ± Growth points for rating A : 20
âœ… User updated - Points: 110 Scans: 11
ðŸŒ³ Garden updated - Plants: 1 Level: 0
ðŸ“¥ Received scan request: {
  userId: '697779d0e78b4fac5872b456',
  barcode: '3068320120256',
  name: 'Eau minÃ©rale naturelle',
  brand: 'Evian',
  co2e: 0.608,
  carbonRating: 'A',
  source: 'openfoodfacts'
}
ðŸ’¾ Creating scan for user: 697779d0e78b4fac5872b456
âœ… Scan created: new ObjectId('69777eb63c00166d8bcfbe8b')
ðŸŒ± Growth points for rating A : 20
âœ… User updated - Points: 120 Scans: 12
ðŸŒ³ Garden updated - Plants: 2 Level: 0
ðŸ“¥ Received scan request: {
  userId: '697779d0e78b4fac5872b456',
  barcode: '3068320120256',
  name: 'Eau minÃ©rale naturelle',
  brand: 'Evian',
  co2e: 0.608,
  carbonRating: 'A',
  source: 'openfoodfacts'
}
ðŸ’¾ Creating scan for user: 697779d0e78b4fac5872b456
âœ… Scan created: new ObjectId('69777ec43c00166d8bcfbe94')
ðŸŒ± Growth points for rating A : 20
âœ… User updated - Points: 130 Scans: 13
ðŸŒ³ Garden updated - Plants: 3 Level: 1
ðŸ“¥ Received scan request: {
  userId: '697779d0e78b4fac5872b456',
  barcode: '3068320120256',
  name: 'Eau minÃ©rale naturelle',
  brand: 'Evian',
  co2e: 0.608,
  carbonRating: 'A',
  source: 'openfoodfacts'
}
ðŸ’¾ Creating scan for user: 697779d0e78b4fac5872b456
âœ… Scan created: new ObjectId('69777ecb3c00166d8bcfbe9f')
ðŸŒ± Growth points for rating A : 20
âœ… User updated - Points: 140 Scans: 14
ðŸŒ³ Garden updated - Plants: 4 Level: 1
ðŸ“¥ Received scan request: {
  userId: '697779d0e78b4fac5872b456',
  barcode: '3068320120256',
  name: 'Eau minÃ©rale naturelle',
  brand: 'Evian',
  co2e: 0.608,
  carbonRating: 'A',
  source: 'openfoodfacts'
}
ðŸ’¾ Creating scan for user: 697779d0e78b4fac5872b456
âœ… Scan created: new ObjectId('69777ed33c00166d8bcfbeac')
ðŸŒ± Growth points for rating A : 20
âœ… User updated - Points: 150 Scans: 15
ðŸŒ³ Garden updated - Plants: 5 Level: 1
Signup error: MongoServerSelectionError: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80

    at Topology.selectServer (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/sdam/topology.js:346:38)
    at async tryOperation (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/operations/execute_operation.js:150:18)
    at async executeOperation (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/operations/execute_operation.js:80:16)
    at async FindCursor._initialize (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/find_cursor.js:62:26)
    at async FindCursor.cursorInit (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:620:27)
    at async FindCursor.fetchBatch (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:654:13)
    at async FindCursor.next (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:326:17)
    at async Collection.findOne (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/collection.js:313:24)
    at async model.Query._findOne (/Users/assile/carbonQuest/backend/node_modules/mongoose/lib/query.js:2719:15)
    at async model.Query.exec (/Users/assile/carbonQuest/backend/node_modules/mongoose/lib/query.js:4652:63) {
  errorLabelSet: Set(0) {},
  reason: TopologyDescription {
    type: 'ReplicaSetNoPrimary',
    servers: Map(3) {
      'ac-6dlrzjf-shard-00-00.vpcjjzi.mongodb.net:27017' => [ServerDescription],
      'ac-6dlrzjf-shard-00-01.vpcjjzi.mongodb.net:27017' => [ServerDescription],
      'ac-6dlrzjf-shard-00-02.vpcjjzi.mongodb.net:27017' => [ServerDescription]
    },
    stale: false,
    compatible: true,
    heartbeatFrequencyMS: 10000,
    localThresholdMS: 15,
    setName: 'atlas-2pehlo-shard-0',
    maxElectionId: new ObjectId('7fffffff0000000000000166'),
    maxSetVersion: 273,
    commonWireVersion: 0,
    logicalSessionTimeoutMinutes: null
  },
  code: undefined,
  [cause]: MongoNetworkError: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80
  
      at TLSSocket.<anonymous> (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cmap/connect.js:286:44)
      at Object.onceWrapper (node:events:622:26)
      at TLSSocket.emit (node:events:507:28)
      at emitErrorNT (node:internal/streams/destroy:170:8)
      at emitErrorCloseNT (node:internal/streams/destroy:129:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
    errorLabelSet: Set(1) { 'ResetPool' },
    beforeHandshake: false,
    [cause]: [Error: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80
    ] {
      library: 'SSL routines',
      reason: 'tlsv1 alert internal error',
      code: 'ERR_SSL_TLSV1_ALERT_INTERNAL_ERROR'
    }
  }
}
Signup error: MongoServerSelectionError: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80

    at Topology.selectServer (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/sdam/topology.js:346:38)
    at async tryOperation (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/operations/execute_operation.js:150:18)
    at async executeOperation (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/operations/execute_operation.js:80:16)
    at async FindCursor._initialize (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/find_cursor.js:62:26)
    at async FindCursor.cursorInit (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:620:27)
    at async FindCursor.fetchBatch (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:654:13)
    at async FindCursor.next (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:326:17)
    at async Collection.findOne (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/collection.js:313:24)
    at async model.Query._findOne (/Users/assile/carbonQuest/backend/node_modules/mongoose/lib/query.js:2719:15)
    at async model.Query.exec (/Users/assile/carbonQuest/backend/node_modules/mongoose/lib/query.js:4652:63) {
  errorLabelSet: Set(0) {},
  reason: TopologyDescription {
    type: 'ReplicaSetNoPrimary',
    servers: Map(3) {
      'ac-6dlrzjf-shard-00-00.vpcjjzi.mongodb.net:27017' => [ServerDescription],
      'ac-6dlrzjf-shard-00-01.vpcjjzi.mongodb.net:27017' => [ServerDescription],
      'ac-6dlrzjf-shard-00-02.vpcjjzi.mongodb.net:27017' => [ServerDescription]
    },
    stale: false,
    compatible: true,
    heartbeatFrequencyMS: 10000,
    localThresholdMS: 15,
    setName: 'atlas-2pehlo-shard-0',
    maxElectionId: new ObjectId('7fffffff0000000000000166'),
    maxSetVersion: 273,
    commonWireVersion: 0,
    logicalSessionTimeoutMinutes: null
  },
  code: undefined,
  [cause]: MongoNetworkError: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80
  
      at TLSSocket.<anonymous> (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cmap/connect.js:286:44)
      at Object.onceWrapper (node:events:622:26)
      at TLSSocket.emit (node:events:507:28)
      at emitErrorNT (node:internal/streams/destroy:170:8)
      at emitErrorCloseNT (node:internal/streams/destroy:129:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
    errorLabelSet: Set(1) { 'ResetPool' },
    beforeHandshake: false,
    [cause]: [Error: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80
    ] {
      library: 'SSL routines',
      reason: 'tlsv1 alert internal error',
      code: 'ERR_SSL_TLSV1_ALERT_INTERNAL_ERROR'
    }
  }
}
Signup error: MongoServerSelectionError: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80

    at Topology.selectServer (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/sdam/topology.js:346:38)
    at async tryOperation (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/operations/execute_operation.js:150:18)
    at async executeOperation (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/operations/execute_operation.js:80:16)
    at async FindCursor._initialize (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/find_cursor.js:62:26)
    at async FindCursor.cursorInit (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:620:27)
    at async FindCursor.fetchBatch (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:654:13)
    at async FindCursor.next (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:326:17)
    at async Collection.findOne (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/collection.js:313:24)
    at async model.Query._findOne (/Users/assile/carbonQuest/backend/node_modules/mongoose/lib/query.js:2719:15)
    at async model.Query.exec (/Users/assile/carbonQuest/backend/node_modules/mongoose/lib/query.js:4652:63) {
  errorLabelSet: Set(0) {},
  reason: TopologyDescription {
    type: 'ReplicaSetNoPrimary',
    servers: Map(3) {
      'ac-6dlrzjf-shard-00-00.vpcjjzi.mongodb.net:27017' => [ServerDescription],
      'ac-6dlrzjf-shard-00-01.vpcjjzi.mongodb.net:27017' => [ServerDescription],
      'ac-6dlrzjf-shard-00-02.vpcjjzi.mongodb.net:27017' => [ServerDescription]
    },
    stale: false,
    compatible: true,
    heartbeatFrequencyMS: 10000,
    localThresholdMS: 15,
    setName: 'atlas-2pehlo-shard-0',
    maxElectionId: new ObjectId('7fffffff0000000000000166'),
    maxSetVersion: 273,
    commonWireVersion: 0,
    logicalSessionTimeoutMinutes: null
  },
  code: undefined,
  [cause]: MongoNetworkError: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80
  
      at TLSSocket.<anonymous> (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cmap/connect.js:286:44)
      at Object.onceWrapper (node:events:622:26)
      at TLSSocket.emit (node:events:507:28)
      at emitErrorNT (node:internal/streams/destroy:170:8)
      at emitErrorCloseNT (node:internal/streams/destroy:129:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
    errorLabelSet: Set(1) { 'ResetPool' },
    beforeHandshake: false,
    [cause]: [Error: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80
    ] {
      library: 'SSL routines',
      reason: 'tlsv1 alert internal error',
      code: 'ERR_SSL_TLSV1_ALERT_INTERNAL_ERROR'
    }
  }
}
Signup error: MongoServerSelectionError: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80

    at Topology.selectServer (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/sdam/topology.js:346:38)
    at async tryOperation (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/operations/execute_operation.js:150:18)
    at async executeOperation (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/operations/execute_operation.js:80:16)
    at async FindCursor._initialize (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/find_cursor.js:62:26)
    at async FindCursor.cursorInit (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:620:27)
    at async FindCursor.fetchBatch (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:654:13)
    at async FindCursor.next (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:326:17)
    at async Collection.findOne (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/collection.js:313:24)
    at async model.Query._findOne (/Users/assile/carbonQuest/backend/node_modules/mongoose/lib/query.js:2719:15)
    at async model.Query.exec (/Users/assile/carbonQuest/backend/node_modules/mongoose/lib/query.js:4652:63) {
  errorLabelSet: Set(0) {},
  reason: TopologyDescription {
    type: 'ReplicaSetNoPrimary',
    servers: Map(3) {
      'ac-6dlrzjf-shard-00-00.vpcjjzi.mongodb.net:27017' => [ServerDescription],
      'ac-6dlrzjf-shard-00-01.vpcjjzi.mongodb.net:27017' => [ServerDescription],
      'ac-6dlrzjf-shard-00-02.vpcjjzi.mongodb.net:27017' => [ServerDescription]
    },
    stale: false,
    compatible: true,
    heartbeatFrequencyMS: 10000,
    localThresholdMS: 15,
    setName: 'atlas-2pehlo-shard-0',
    maxElectionId: new ObjectId('7fffffff0000000000000166'),
    maxSetVersion: 273,
    commonWireVersion: 0,
    logicalSessionTimeoutMinutes: null
  },
  code: undefined,
  [cause]: MongoNetworkError: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80
  
      at TLSSocket.<anonymous> (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cmap/connect.js:286:44)
      at Object.onceWrapper (node:events:622:26)
      at TLSSocket.emit (node:events:507:28)
      at emitErrorNT (node:internal/streams/destroy:170:8)
      at emitErrorCloseNT (node:internal/streams/destroy:129:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
    errorLabelSet: Set(1) { 'ResetPool' },
    beforeHandshake: false,
    [cause]: [Error: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80
    ] {
      library: 'SSL routines',
      reason: 'tlsv1 alert internal error',
      code: 'ERR_SSL_TLSV1_ALERT_INTERNAL_ERROR'
    }
  }
}
Signup error: MongoServerSelectionError: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80

    at Topology.selectServer (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/sdam/topology.js:346:38)
    at async tryOperation (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/operations/execute_operation.js:150:18)
    at async executeOperation (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/operations/execute_operation.js:80:16)
    at async FindCursor._initialize (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/find_cursor.js:62:26)
    at async FindCursor.cursorInit (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:620:27)
    at async FindCursor.fetchBatch (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:654:13)
    at async FindCursor.next (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cursor/abstract_cursor.js:326:17)
    at async Collection.findOne (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/collection.js:313:24)
    at async model.Query._findOne (/Users/assile/carbonQuest/backend/node_modules/mongoose/lib/query.js:2719:15)
    at async model.Query.exec (/Users/assile/carbonQuest/backend/node_modules/mongoose/lib/query.js:4652:63) {
  errorLabelSet: Set(0) {},
  reason: TopologyDescription {
    type: 'ReplicaSetNoPrimary',
    servers: Map(3) {
      'ac-6dlrzjf-shard-00-00.vpcjjzi.mongodb.net:27017' => [ServerDescription],
      'ac-6dlrzjf-shard-00-01.vpcjjzi.mongodb.net:27017' => [ServerDescription],
      'ac-6dlrzjf-shard-00-02.vpcjjzi.mongodb.net:27017' => [ServerDescription]
    },
    stale: false,
    compatible: true,
    heartbeatFrequencyMS: 10000,
    localThresholdMS: 15,
    setName: 'atlas-2pehlo-shard-0',
    maxElectionId: new ObjectId('7fffffff0000000000000166'),
    maxSetVersion: 273,
    commonWireVersion: 0,
    logicalSessionTimeoutMinutes: null
  },
  code: undefined,
  [cause]: MongoNetworkError: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80
  
      at TLSSocket.<anonymous> (/Users/assile/carbonQuest/backend/node_modules/mongodb/lib/cmap/connect.js:286:44)
      at Object.onceWrapper (node:events:622:26)
      at TLSSocket.emit (node:events:507:28)
      at emitErrorNT (node:internal/streams/destroy:170:8)
      at emitErrorCloseNT (node:internal/streams/destroy:129:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
    errorLabelSet: Set(1) { 'ResetPool' },
    beforeHandshake: false,
    [cause]: [Error: 80A0A8F601000000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:916:SSL alert number 80
    ] {
      library: 'SSL routines',
      reason: 'tlsv1 alert internal error',
      code: 'ERR_SSL_TLSV1_ALERT_INTERNAL_ERROR'
    }
  }
}
